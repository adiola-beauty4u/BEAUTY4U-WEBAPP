<!-- Expand/Collapse All Button -->
<div class="mb-4 flex justify-end">
    <button mat-stroked-button color="primary" (click)="toggleAll()" *ngIf="tableGroups.length > 0">
        {{ allExpanded() ? 'Collapse All' : 'Expand All' }}
    </button>
</div>

<!-- Table Groups -->
<div *ngFor="let group of tableGroups; let i = index">
    <mat-card class="mb-4 compact-card">
        <mat-card-content *ngIf="expandedGroups()[i]">
            <app-child-table [group]="group" [displayedColumns]="getDisplayedColumns(group)"
                [pageSize]="pageSizes()[i]" [pageIndex]="pageIndexes()[i]" [showInvalidCount]="showInvalidCount"
                (page)="onPage($event, i)">
            </app-child-table>
        </mat-card-content>
    </mat-card>
</div>